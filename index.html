
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>OpenStackGateway documentation - OpenStackGateway documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.8c3ca2c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=barlow:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"barlow";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#openstackgateway" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="OpenStackGateway documentation" class="md-header__button md-logo" aria-label="OpenStackGateway documentation" data-md-component="logo">
      
  <img src="assets/logo_round.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenStackGateway documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OpenStackGateway documentation
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aau-claaudia/OpenStackGateway" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="code" class="md-tabs__link">
        
  
    
  
  Code

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="OpenStackGateway documentation" class="md-nav__button md-logo" aria-label="OpenStackGateway documentation" data-md-component="logo">
      
  <img src="assets/logo_round.png" alt="logo">

    </a>
    OpenStackGateway documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aau-claaudia/OpenStackGateway" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Home
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Documentation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#technology" class="md-nav__link">
    <span class="md-ellipsis">
      Technology
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#swagger" class="md-nav__link">
    <span class="md-ellipsis">
      Swagger
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-and-authorization" class="md-nav__link">
    <span class="md-ellipsis">
      Authentication and Authorization
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    <span class="md-ellipsis">
      Create
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Create">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sequence-diagram-for-the-create-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Sequence diagram for the create flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    <span class="md-ellipsis">
      Delete
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Delete">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sequence-diagram-for-the-delete-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Sequence diagram for the delete flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extend" class="md-nav__link">
    <span class="md-ellipsis">
      Extend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#suspend" class="md-nav__link">
    <span class="md-ellipsis">
      Suspend
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify" class="md-nav__link">
    <span class="md-ellipsis">
      Verify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieve-products" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieve Products
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openinteractivesession" class="md-nav__link">
    <span class="md-ellipsis">
      OpenInteractiveSession
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieveutilization" class="md-nav__link">
    <span class="md-ellipsis">
      RetrieveUtilization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stack-lifetime-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Stack lifetime overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scheduled-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduled Tasks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Scheduled Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chargeallstacks" class="md-nav__link">
    <span class="md-ellipsis">
      ChargeAllStacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heartbeat" class="md-nav__link">
    <span class="md-ellipsis">
      Heartbeat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cleanupfailedstacks" class="md-nav__link">
    <span class="md-ellipsis">
      cleanUpFailedStacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletenotchargedstacks" class="md-nav__link">
    <span class="md-ellipsis">
      deleteNotChargedStacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sendcreditdeficitupdates" class="md-nav__link">
    <span class="md-ellipsis">
      sendCreditDeficitUpdates
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="code" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<p><a href="index.html">OpenStackGateway</a></p>
<h1 id="openstackgateway">OpenStackGateway</h1>
<p>Compute provider API for UCloud</p>
<h2 id="overview">Overview</h2>
<p><img alt="Overview" src="http://www.plantuml.com/plantuml/proxy?cache=no&amp;src=https://raw.githubusercontent.com/aau-claaudia/OpenStackGateway/main/docs/diagrams/overview.iuml" /></p>
<p>This service facilitates communication between UCloud and Claaudia OpenStack.
In UCloud terms, this is a compute provider, that provides a compute service to UCloud.
It is a stateless service with an API based on this example:
<a href="https://github.com/SDU-eScience/UCloud/tree/master/provider-integration/spring-boot-example">UCloud Spring Boot Example</a></p>
<p>It implements this interface: <a href="https://github.com/SDU-eScience/UCloud/tree/master/backend/jvm-provider-support">JvmProviderSupport</a></p>
<p>See UClouds <a href="https://docs.cloud.sdu.dk/dev/backend/app-orchestrator-service/wiki/provider.html#authentication-and-authorization">Compute Provider Documentation</a></p>
<h2 id="documentation">Documentation</h2>
<p><a href="code">Service documentation on code level</a></p>
<p>This documentation is generated with <a href="https://github.com/Kotlin/dokka">Dokka</a>:</p>
<p><code>./gradlew dokkaGfm</code></p>
<h2 id="technology">Technology</h2>
<p>The service is built with Kotlin and Spring Boot.
It uses the gradle build tool</p>
<h2 id="swagger">Swagger</h2>
<p>The swagger ui can be reached at the base url.
Authentication is enabled, and a Bearer token can be added using the "Authorize" button.
The API can also be tested directly with cURL.
The autogenerated requests for many of the endpoints cannot be shown.
I have included examples of requests <a href="src/test/resources/requests/create-job.json">here</a>
to test the provider API.</p>
<p>For the manual insertion endpoint there is an example <a href="src/test/resources/requests/temp-job-request-example.json">here</a>.</p>
<h2 id="authentication-and-authorization">Authentication and Authorization</h2>
<p>UCloud and the provider
This is handled by UClouds provider integration module: <a href="https://github.com/SDU-eScience/UCloud/tree/master/backend/jvm-provider-support">Jvm-Provider-Support</a>
A certificate and a refresh_token is added to the config and used to authenticate
the provider integration module on inbound and outbound requests.
See more here: <a href="https://github.com/SDU-eScience/UCloud/tree/master/provider-integration/integration-module">UCloud Compute Providers</a></p>
<h2 id="api">API</h2>
<p>The gateway currently exposes the following endpoints for ucloud:</p>
<h3 id="create">Create</h3>
<p>Start one or more compute jobs by creating stacks in openstack</p>
<p>One or more jobs are received from ucloud and is assumed to be ready to start.
The ucloud jobs are converted to openstack stack format and sent to openstack.
Without waiting for the stacks to start respond to ucloud.</p>
<p>A monitoring thread is started for each stack that will send a status update to ucloud when you stack has successfully started or failed.</p>
<h4 id="sequence-diagram-for-the-create-flow">Sequence diagram for the create flow</h4>
<p><img alt="Overview" src="http://www.plantuml.com/plantuml/proxy?cache=no&amp;src=https://raw.githubusercontent.com/aau-claaudia/OpenStackGateway/main/docs/diagrams/create-stack-sequence.iuml" /></p>
<h3 id="delete">Delete</h3>
<p>Deletes one or more compute jobs by deleting stacks in OpenStack</p>
<p>The corresponding stacks are found in OpenStack and delete requests are sent.</p>
<h4 id="sequence-diagram-for-the-delete-flow">Sequence diagram for the delete flow</h4>
<p><img alt="Overview" src="http://www.plantuml.com/plantuml/proxy?cache=no&amp;src=https://raw.githubusercontent.com/aau-claaudia/OpenStackGateway/main/docs/diagrams/delete-stack-sequence.iuml" /></p>
<h3 id="extend">Extend</h3>
<p>Todo: Not implemented / Not applicable for virtual machines</p>
<h3 id="suspend">Suspend</h3>
<p>Todo: Not implemented</p>
<p>This should suspend the virtual machine without deleting any of its resources</p>
<h3 id="verify">Verify</h3>
<p>Verify UClouds Job status is synchronized with openstack stack status</p>
<p>FIXME: Is this called for deleted ucloud jobs?</p>
<p>This call is periodically executed by UCloud.
The expected status is compared with the actual status in OpenStack and
a status update is sent if there is a difference.</p>
<p>If the stack could not be found in OpenStack send a status update with Job success to UCloud.</p>
<p>The gateway does not attempt to start the stack.</p>
<h3 id="retrieve-products">Retrieve Products</h3>
<p>Provide ucloud with the available products.
These are basically equivalent to openstack flavors but need to adhere to the ucloud format
This includes information additional information, e.g., product is Virtual Machine</p>
<h3 id="openinteractivesession">OpenInteractiveSession</h3>
<p>Todo: Not implemented</p>
<h3 id="retrieveutilization">RetrieveUtilization</h3>
<p>Todo: Not implemented</p>
<h2 id="stack-lifetime-overview">Stack lifetime overview</h2>
<p><img alt="Insufficient resources flow" src="http://www.plantuml.com/plantuml/proxy?cache=no&amp;src=https://raw.githubusercontent.com/aau-claaudia/OpenStackGateway/main/docs/diagrams/insufficient-resources-flow.iuml" /></p>
<p>This flow illustrates how a stack lifecycle can look. 
When created, the stack goes to the running state and is charged every 15 minutes.
If the charging fails the instance of the stack is shutoff.
The charge task will try to charge the stack and if successful, the instance is restarted.
If the max lifetime for a shutoff instance is reached the whole stack is deleted.</p>
<h2 id="scheduled-tasks">Scheduled Tasks</h2>
<p>Scheduled by the Spring Framework for doing maintenance and job charging</p>
<h3 id="chargeallstacks">ChargeAllStacks</h3>
<p>Charges the corresponding UCloud job for all active OpenStack stacks.
This is run every 15 minutes and each execution will charge each stack the amount of time since it was last charged.
To keep track of this a timestamp is saved as a tag on the stack in OpenStack.
We only charge stacks that have status: "CREATE_COMPLETE" or "UPDATE_COMPLETE".</p>
<ul>
<li>Get the corresponding job from ucloud to make sure it exists, return if not</li>
<li>Amount to charge = time between the lastCharged timestamp and now.</li>
<li>Maintain lastCharged for each stack as a tag on the stack in openstack.</li>
<li>lastCharged is the moment the stack was charged last.</li>
<li>The first time a stack is charged, use its creation time as lastCharged</li>
</ul>
<p>If the response from ucloud is <code>Insufficient resources</code>, the stacks instance is shut off.</p>
<p>If this stack can successfully charge later on, the instance is restarted.</p>
<h3 id="heartbeat">Heartbeat</h3>
<p>This is run every 5 minutes to add a log entry to splunk.
An alarm is configured to monitor this log entry and make sure the service is running.</p>
<h3 id="cleanupfailedstacks">cleanUpFailedStacks</h3>
<p>Deletes stacks that failed to create or delete.
An update is sent to ucloud when delete is successful</p>
<h3 id="deletenotchargedstacks">deleteNotChargedStacks</h3>
<p>Delete the stacks that are shutdown and has not been charged for a set amount of time.
The time is configured under <code>janitor</code> in the config.
<code>deleteShutoffInstanceAfterDays</code> is the default number of days a stack can have a shutoff instance before it is deleted.
<code>flavorLifetimes</code> is flavor specific lifetimes that overrules the default.</p>
<h3 id="sendcreditdeficitupdates">sendCreditDeficitUpdates</h3>
<p>When a stack has had its instance shutoff by failing to charge, this task will send a message to be shown on the ucloud interface.
It calculates how many resources are needed to restart the instance and continue charging.</p>
<h1 id="deployment">Deployment</h1>
<p>Todo</p>
<h1 id="config">Config</h1>
<p>TODO:
Her skal stå det er vigtigt man sætter Metadata på flavors: Category</p>
<h1 id="openstack-compute-flavors">Openstack compute flavors</h1>
<p>The general compute flavors are based on deic's type1 descriptions available <a href="somewhere">somewhere</a>.</p>
<p>GPU instances are based on our current hardware,
machines with six t4 GPUs, 256GB memory,
and 64 vCPUs (2x16 core EPYCs).</p>
<p>Storage is based on whatever we did on our old OpenStack platform.</p>
<p>Pricing is just an example</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>vCPU</th>
<th>RAM</th>
<th>Volatile Storage</th>
<th>GPU</th>
<th>Price</th>
</tr>
</thead>
<tbody>
<tr>
<td>uc-general-small</td>
<td>4 vCPU</td>
<td>16 Gb</td>
<td>1 Tb</td>
<td>N/A</td>
<td>0.34 DKK/hour</td>
</tr>
<tr>
<td>uc-general-medium</td>
<td>8 vCPU</td>
<td>32 Gb</td>
<td>1 Tb</td>
<td>N/A</td>
<td>0.68 DKK/hour</td>
</tr>
<tr>
<td>uc-general-large</td>
<td>16 vCPU</td>
<td>64 Gb</td>
<td>1 Tb</td>
<td>N/A</td>
<td>1.37 DKK/hour</td>
</tr>
<tr>
<td>uc-general-xlarge</td>
<td>64 vCPU</td>
<td>256 Gb</td>
<td>1 Tb</td>
<td>N/A</td>
<td>5.50 DKK/hour</td>
</tr>
<tr>
<td>uc-t4-1</td>
<td>10 vCPU</td>
<td>40 Gb</td>
<td>1 Tb</td>
<td>T4 16 Gb</td>
<td>8.50 DKK/hour</td>
</tr>
</tbody>
</table>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 - 2022 Claaudia
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://twitter.com/claaudia_aau" target="_blank" rel="noopener" title="Claaudia on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<claaudia@aau.dk>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.claaudia.aau.dk/" target="_blank" rel="noopener" title="www.claaudia.aau.dk" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.4c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.3c2.2 20.4 3.3 41.8 3.3 64m28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64m112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7m-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6M8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64m186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.7z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.instant", "toc.integrate"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>